<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>全局加载动画示例</title>
</head>
<body>
<!-- 引入加载动画的 JS 文件 -->
<button onclick="loadData()">开始加载数据</button>
<script src="./js/globalLoading.js"></script>
<script type="text/javascript">
  // 模拟异步操作的加载动画示例
  function loadData() {
      // 使用案例
      const globalLoading = new GlobalLoading();
      globalLoading.show();

      // // 传递一个函数给 processLongRunningTask 方法
      // globalLoading.processLongRunningTask().then(() => {
      //     globalLoading.hide();
      // }).catch((error) => {
      //     globalLoading.handleError(error);
      // });

      globalLoading.runWithLambdaFunction((i) => {
          console.log(i);
          // 返回 false 来停止任务执行
          if (i >= 10000) {
            return false;
          }
          i++;
          // 如果任务应该继续，不返回任何值或返回 true
      })


      // // 初始化全局加载动画实例
      // const globalLoading = new GlobalLoading();
      // globalLoading.show();  // 显示加载动画
      //
      // globalLoading.processLongRunningTask([() => {
      //     for (let i = 0; i < 2000; i++) {
      //         console.log(i);
      //     }
      // }], 10).then(() => {
      //     globalLoading.hide();
      // }).catch((error) => {
      //     globalLoading.handleError(error);
      // });

      // globalLoading.hide();

    // // 使用案例
    // // const globalLoading = new GlobalLoading();
    // globalLoading.show();
    //
    // // 假设这是一个长时间运行的任务
    // const longRunningTask = Array.from({ length: 2000 }, (_, i) => i);
    //
    // // 处理长时间运行的任务，每10毫秒执行一次任务的一小部分
    // globalLoading.processLongRunningTask(longRunningTask, 10).then(() => {
    //   globalLoading.hide();
    // }).catch((error) => {
    //   globalLoading.handleError(error);
    // });

    // // 使用异步方式确保动画先显示，再执行耗时操作
    // globalLoading.show().then(() => {
    //   for (let i = 0; i < 2000; i++) {
    //     console.log(i);
    //   }
    //   globalLoading.hide();  // 结束后隐藏加载动画
    // });


    // return new Promise((resolve, reject) => {
    //     setTimeout(() => {
    //           // 模拟成功或失败的加载操作
    //           const success = Math.random() > 0.3;
    //           if (success) {
    //               resolve('数据加载成功');
    //           } else {
    //               reject('数据加载失败');
    //           }
    //       }, 2000);  // 模拟两秒的加载时间
    //     }).then(response => {
    //           console.log(response);
    //           globalLoading.hide();  // 加载成功，关闭加载动画
    //     }).catch(error => {
    //           globalLoading.handleError(error);  // 发生异常，关闭加载动画
    //     });
  }
</script>
</body>
</html>
